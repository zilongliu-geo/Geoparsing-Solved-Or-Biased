<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link crossorigin="" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet"></link>
  <script crossorigin="" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();
    var markers_by_name = {};
    
    var green_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    var red_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    function load() {

        map = L.map('map');
    
    
	map.setView([11.68028,124.51667], 8);
      

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
	
	  attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',
	
	    tileSize: 512,
	    maxZoom: 18,
	    zoomOffset: -1,
	    id: 'mapbox/streets-v11',
	    accessToken: 'unset'
	}).addTo(map);
	    
	
    var marker = L.marker([11.68028,124.51667],
			  {
			      title: "Bohol",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([9.63333,123.88333],
			  {
			      title: "Bool",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([7.39583,-12.1075],
			  {
			      title: "Gbahol",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([-8.13722,110.74861],
			  {
			      title: "Bohol",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([7.38901,-12.51224],
			  {
			      title: "Bohol",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([7.4928,125.843],
			  {
			      title: "Bohol",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([10.48228,119.8943],
			  {
			      title: "Bohol",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([5.74806,46.2275],
			  {
			      title: "Bohol",
			      icon: 8 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 8 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(8 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([10.1993,123.5467],
			  {
			      title: "Bojo",
			      icon: 9 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 9 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(9 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([9.36081,47.30185],
			  {
			      title: "Bohol",
			      icon: 10 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 10 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(10 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([-8.05306,110.79611],
			  {
			      title: "Bohol",
			      icon: 11 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 11 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(11 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([8.12786,-12.65428],
			  {
			      title: "Bohol",
			      icon: 12 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 12 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(12 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([9.65738,46.38313],
			  {
			      title: "Bohol",
			      icon: 13 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 13 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(13 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([9.83333,124.16667],
			  {
			      title: "Bohol",
			      icon: 14 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 14 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(14 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([9.31667,47.3],
			  {
			      title: "Bohol",
			      icon: 15 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 15 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(15 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([10.41474,44.32331],
			  {
			      title: "Bohól",
			      icon: 16 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 16 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(16 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([10.7869,47.4119],
			  {
			      title: "Bohol",
			      icon: 17 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 17 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(17 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([12.05284,43.25223],
			  {
			      title: "Boẖol",
			      icon: 18 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 18 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(18 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([13.8335,121.1012],
			  {
			      title: "Bohol River",
			      icon: 19 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 19 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(19 == 1)
    markers_by_name["Bohol"] = marker;
  
    var marker = L.marker([9.83333,124.16667],
			  {
			      title: "Bohol",
			      icon: 20 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 20 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(20 == 1)
    markers_by_name["Bohol"] = marker;
  

	adjust_locations(markers);
    }

    function goto(x, y) {
	map.flyTo([x,y]);
    }

    function goto_name(name) {
        if(markers_by_name.hasOwnProperty(name))
    	    map.flyTo(markers_by_name[name].getLatLng());
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getLatLng();
        if(l.lat == lastlat && l.lng == lastlng)
        {
//            alert("match: " + l.lat + "," + l.lng + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat;
        lastlng = l.lng;
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getLatLng();
    var lat = latlng.lat, lng = latlng.lng;
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var newlatlng = new L.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setLatLng(newlatlng);
//        alert(lat + " -> " + newlatlng.lat + "   " + lng + " -> " + newlatlng.lng);
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getLatLng(), l2 = m2.getLatLng();
    if(l1.lat == l2.lat)
        return l1.lng - l2.lng;
    else
        return l1.lat - l2.lat;
}
//]]>
      </script>
  <style>
	#map   {width: 100%; height: 500px}
        #text  {width: 50%; float: left; background-color: #BBCCAA; margin: 20px;}
        #list  {margin-left: 50%; overflow: scroll;}
        .loc   {background-color: #E0FFE8;}
	table  {border-collapse: collapse; empty-cells: show;}
	tr     {border: 1px solid black;}
	th,td  {padding:  3px;}
	td[best="true"]  {color: green;}
	td[best="false"] {color: red;}
      </style>
 </head>
 <body onload="load()">
  <div onload="load()" id="map"></div>
  <div id="lower">
   <div id="text">
<p>Over 27 children are dead, and another 100 are hospitalized, after eating tainted cassava on the central Philippine island of <span onClick="goto_name('Bohol')" class="loc">Bohol</span>, according to local officials. Francisca Doliente told The Associated Press that a friend who shared a portion of the cassava with her 9-year-old niece, Arve Tamor, was "gone...She died". "It was during recess time. The children bought cassava," said Mabini Vice-Mayor Ester Tabigue. "Several children were brought here vomiting and complaining of stomach aches," said Dr. Elpidio Bonito. He noted that seven children did not make it to the hospital before succumbing to the food poisoning. At the <span onClick="goto_name('Ubay L.G.')" class="loc">Ubay L.G.</span> Cotamura Community Hospital, Dr. Leta Cutamora confirmed 14 fatalities and 35 others under treatment. Almost 50 students from the San Jose Elementary School were sent to two other hospitals. One of the sellers of the cassava, a middle-aged woman, was also sent to the hospital. Cassava is a starchy delicacy made from a tropical plant. It is poisonous when raw, and must be prepared properly so it is not converted into cyanide by the human digestive system. "Some said they took only two bites because it tasted bitter and the effects were felt five to 10 minutes later," said Dr. Harold Garcia, from the Garcia Memorial Provincial Hospital. A sample of the cassava will be studied at local Crime Laboratory Group, to try and determine what caused the food poisoning. The cassava was deep-fried and caramelized.</p>
</div>
   <div id="list">
    <div id="instr">
     <p>
            Click on a lat/long to centre the map there.
	  </p>
    </div>
    <div id="table">
     <table>
      <tr>
       <th>Bohol</th>
       <td best="true">
        <a onClick="goto(11.68028,124.51667)">
         <span style="white-space:nowrap">11.680,124.517</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(9.63333,123.88333)">
         <span style="white-space:nowrap">9.633,123.883</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(7.39583,-12.1075)">
         <span style="white-space:nowrap">7.396,-12.107</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-8.13722,110.74861)">
         <span style="white-space:nowrap">-8.137,110.749</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(7.38901,-12.51224)">
         <span style="white-space:nowrap">7.389,-12.512</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(7.4928,125.843)">
         <span style="white-space:nowrap">7.493,125.843</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(10.48228,119.8943)">
         <span style="white-space:nowrap">10.482,119.894</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(5.74806,46.2275)">
         <span style="white-space:nowrap">5.748,46.227</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(10.1993,123.5467)">
         <span style="white-space:nowrap">10.199,123.547</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(9.36081,47.30185)">
         <span style="white-space:nowrap">9.361,47.302</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-8.05306,110.79611)">
         <span style="white-space:nowrap">-8.053,110.796</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(8.12786,-12.65428)">
         <span style="white-space:nowrap">8.128,-12.654</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(9.65738,46.38313)">
         <span style="white-space:nowrap">9.657,46.383</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(9.83333,124.16667)">
         <span style="white-space:nowrap">9.833,124.167</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(9.31667,47.3)">
         <span style="white-space:nowrap">9.317,47.300</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(10.41474,44.32331)">
         <span style="white-space:nowrap">10.415,44.323</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(10.7869,47.4119)">
         <span style="white-space:nowrap">10.787,47.412</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(12.05284,43.25223)">
         <span style="white-space:nowrap">12.053,43.252</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(13.8335,121.1012)">
         <span style="white-space:nowrap">13.834,121.101</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(9.83333,124.16667)">
         <span style="white-space:nowrap">9.833,124.167</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Ubay L.G.</th>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </body>
</html>
