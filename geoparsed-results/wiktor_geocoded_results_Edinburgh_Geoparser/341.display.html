<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link crossorigin="" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet"></link>
  <script crossorigin="" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();
    var markers_by_name = {};
    
    var green_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    var red_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    function load() {

        map = L.map('map');
    
    
	map.setView([-29,24], 8);
      

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
	
	  attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',
	
	    tileSize: 512,
	    maxZoom: 18,
	    zoomOffset: -1,
	    id: 'mapbox/streets-v11',
	    accessToken: 'unset'
	}).addTo(map);
	    
	
    var marker = L.marker([-29,24],
			  {
			      title: "South Africa",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["South Africa"] = marker;
  
    var marker = L.marker([-31.3096,18.357],
			  {
			      title: "South Africa",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["South Africa"] = marker;
  
    var marker = L.marker([24.48721,54.37045],
			  {
			      title: "Janūb Afrīqiyā",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["South Africa"] = marker;
  
    var marker = L.marker([-45,-15],
			  {
			      title: "South Atlantic Ocean",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Atlantic Ocean"] = marker;
  
    var marker = L.marker([10,-25],
			  {
			      title: "Atlantic Ocean",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Atlantic Ocean"] = marker;
  
    var marker = L.marker([-33.95166,18.38437],
			  {
			      title: "Camps Bay",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Camps Bay"] = marker;
  
    var marker = L.marker([-33.94999,18.37649],
			  {
			      title: "Camps Bay",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Camps Bay"] = marker;
  
    var marker = L.marker([-33.92795,18.38259],
			  {
			      title: "Bantry Bay",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Bantry Bay"] = marker;
  
    var marker = L.marker([-33.7818,151.2179],
			  {
			      title: "Bantry Bay",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Bantry Bay"] = marker;
  
    var marker = L.marker([51.65,-9.71667],
			  {
			      title: "Bantry Bay",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Bantry Bay"] = marker;
  
    var marker = L.marker([-33.92674,18.37341],
			  {
			      title: "Bantry Bay",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Bantry Bay"] = marker;
  

	adjust_locations(markers);
    }

    function goto(x, y) {
	map.flyTo([x,y]);
    }

    function goto_name(name) {
        if(markers_by_name.hasOwnProperty(name))
    	    map.flyTo(markers_by_name[name].getLatLng());
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getLatLng();
        if(l.lat == lastlat && l.lng == lastlng)
        {
//            alert("match: " + l.lat + "," + l.lng + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat;
        lastlng = l.lng;
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getLatLng();
    var lat = latlng.lat, lng = latlng.lng;
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var newlatlng = new L.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setLatLng(newlatlng);
//        alert(lat + " -> " + newlatlng.lat + "   " + lng + " -> " + newlatlng.lng);
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getLatLng(), l2 = m2.getLatLng();
    if(l1.lat == l2.lat)
        return l1.lng - l2.lng;
    else
        return l1.lat - l2.lat;
}
//]]>
      </script>
  <style>
	#map   {width: 100%; height: 500px}
        #text  {width: 50%; float: left; background-color: #BBCCAA; margin: 20px;}
        #list  {margin-left: 50%; overflow: scroll;}
        .loc   {background-color: #E0FFE8;}
	table  {border-collapse: collapse; empty-cells: show;}
	tr     {border: 1px solid black;}
	th,td  {padding:  3px;}
	td[best="true"]  {color: green;}
	td[best="false"] {color: red;}
      </style>
 </head>
 <body onload="load()">
  <div onload="load()" id="map"></div>
  <div id="lower">
   <div id="text">
<p>Clifton is an affluent suburb of Cape Town, <span onClick="goto_name('South Africa')" class="loc">South Africa</span>. It is an exclusive residential area and is home to some of the most expensive real estate in <span onClick="goto_name('South Africa')" class="loc">South Africa</span>, with dwellings nestled on cliffs that have sweeping views of the <span onClick="goto_name('Atlantic Ocean')" class="loc">Atlantic Ocean</span>. Clifton was rated as one of the Top Ten Beaches by the cable and satellite television network Discovery Travel Channel in 2003 and 2004 and has received Blue Flag status. In 2005 and 2006 it was rated by Forbes.com at number 8 in the Top 10 Topless beaches in the World. Clifton is neighbored by the suburbs of <span onClick="goto_name('Camps Bay')" class="loc">Camps Bay</span> and <span onClick="goto_name('Bantry Bay')" class="loc">Bantry Bay</span>. The area has a set of 4 beaches which are frequently used destinations for both locals and tourists. The beaches, which are named from 1st to 4th, are separated by falls of granite boulders and have almost pure white granitic sand. The four beaches of Clifton are one of the few areas well protected from the notorious south-easterly wind, which has a great deal to do with its popularity with bathers. A fifth beach, before First Beach, called Moses Beach (so-called because of the papyrus plants that grow along it), appears and disappears as the sand is washed in and out with the seasons. The water, although chilly (12–16 °C), plays host to many watersports, mostly surfing, both board and body. The strongest surf is at First, diminishing to Fourth, where it is the weakest. Fourth beach (to the South), is the most populated and glamorous venue; attracting families. Yachts anchor off Fourth beach, especially on summer weekends. Third beach is known as a venue for gay culture. Second beach is populated by students playing beach volleyball and beach bats. First beach, to the north, the smallest beach, draws a mixed crowd of locals and surfers. Clifton Beach was noted as one of Discovery.com's best beaches by region.</p>
</div>
   <div id="list">
    <div id="instr">
     <p>
            Click on a lat/long to centre the map there.
	  </p>
    </div>
    <div id="table">
     <table>
      <tr>
       <th>South Africa</th>
       <td best="true">
        <a onClick="goto(-29,24)">
         <span style="white-space:nowrap">-29.000,24.000</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-31.3096,18.357)">
         <span style="white-space:nowrap">-31.310,18.357</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(24.48721,54.37045)">
         <span style="white-space:nowrap">24.487,54.370</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Atlantic Ocean</th>
       <td best="true">
        <a onClick="goto(-45,-15)">
         <span style="white-space:nowrap">-45.000,-15.000</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(10,-25)">
         <span style="white-space:nowrap">10.000,-25.000</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Camps Bay</th>
       <td best="true">
        <a onClick="goto(-33.95166,18.38437)">
         <span style="white-space:nowrap">-33.952,18.384</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-33.94999,18.37649)">
         <span style="white-space:nowrap">-33.950,18.376</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Bantry Bay</th>
       <td best="true">
        <a onClick="goto(-33.92795,18.38259)">
         <span style="white-space:nowrap">-33.928,18.383</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-33.7818,151.2179)">
         <span style="white-space:nowrap">-33.782,151.218</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(51.65,-9.71667)">
         <span style="white-space:nowrap">51.650,-9.717</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-33.92674,18.37341)">
         <span style="white-space:nowrap">-33.927,18.373</span>
        </a>
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </body>
</html>
