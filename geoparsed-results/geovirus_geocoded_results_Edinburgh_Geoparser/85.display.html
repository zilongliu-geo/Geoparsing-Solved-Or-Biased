<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link crossorigin="" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet"></link>
  <script crossorigin="" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();
    var markers_by_name = {};
    
    var green_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    var red_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    function load() {

        map = L.map('map');
    
    
	map.setView([-17.16667,29.75], 8);
      

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
	
	  attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',
	
	    tileSize: 512,
	    maxZoom: 18,
	    zoomOffset: -1,
	    id: 'mapbox/streets-v11',
	    accessToken: 'unset'
	}).addTo(map);
	    
	
    var marker = L.marker([-17.16667,29.75],
			  {
			      title: "Mashonaland West",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Mashonaland West"] = marker;
  
    var marker = L.marker([-20.06373,30.82766],
			  {
			      title: "Masvingo",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-20.6,31.4],
			  {
			      title: "Masvingo Province",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-19.40928,31.87364],
			  {
			      title: "Masvingo",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-20.01667,29.95],
			  {
			      title: "Masvingo",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-19.68088,31.45194],
			  {
			      title: "Masvingo",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-20.51101,31.82852],
			  {
			      title: "Maswingo",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-20.31481,30.90008],
			  {
			      title: "Masvingo District",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-20.65341,31.22928],
			  {
			      title: "Masvingo",
			      icon: 8 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 8 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(8 == 1)
    markers_by_name["provinces of Masvingo"] = marker;
  
    var marker = L.marker([-19,29.75],
			  {
			      title: "Zimbabwe",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Zimbabwe"] = marker;
  
    var marker = L.marker([-20.26667,30.91667],
			  {
			      title: "Zimbabwe",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Zimbabwe"] = marker;
  
    var marker = L.marker([-20.3,30.93333],
			  {
			      title: "Zimbabwe",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Zimbabwe"] = marker;
  
    var marker = L.marker([-20.12912,30.73189],
			  {
			      title: "Zimbabwe",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Zimbabwe"] = marker;
  
    var marker = L.marker([15.37901,120.6258],
			  {
			      title: "Voice of America",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Voice of America"] = marker;
  
    var marker = L.marker([35.46739,-77.19968],
			  {
			      title: "Voice of America",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Voice of America"] = marker;
  
    var marker = L.marker([35.6246,-77.49136],
			  {
			      title: "Voice of America",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Voice of America"] = marker;
  
    var marker = L.marker([35.69711,-77.14746],
			  {
			      title: "Voice of America",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Voice of America"] = marker;
  
    var marker = L.marker([7.505,79.7995],
			  {
			      title: "Voice of America",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Voice of America"] = marker;
  

	adjust_locations(markers);
    }

    function goto(x, y) {
	map.flyTo([x,y]);
    }

    function goto_name(name) {
        if(markers_by_name.hasOwnProperty(name))
    	    map.flyTo(markers_by_name[name].getLatLng());
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getLatLng();
        if(l.lat == lastlat && l.lng == lastlng)
        {
//            alert("match: " + l.lat + "," + l.lng + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat;
        lastlng = l.lng;
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getLatLng();
    var lat = latlng.lat, lng = latlng.lng;
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var newlatlng = new L.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setLatLng(newlatlng);
//        alert(lat + " -> " + newlatlng.lat + "   " + lng + " -> " + newlatlng.lng);
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getLatLng(), l2 = m2.getLatLng();
    if(l1.lat == l2.lat)
        return l1.lng - l2.lng;
    else
        return l1.lat - l2.lat;
}
//]]>
      </script>
  <style>
	#map   {width: 100%; height: 500px}
        #text  {width: 50%; float: left; background-color: #BBCCAA; margin: 20px;}
        #list  {margin-left: 50%; overflow: scroll;}
        .loc   {background-color: #E0FFE8;}
	table  {border-collapse: collapse; empty-cells: show;}
	tr     {border: 1px solid black;}
	th,td  {padding:  3px;}
	td[best="true"]  {color: green;}
	td[best="false"] {color: red;}
      </style>
 </head>
 <body onload="load()">
  <div onload="load()" id="map"></div>
  <div id="lower">
   <div id="text">
<p>Five deaths from cholera have been reported in the past week in the Zimbabwean provinces of <span onClick="goto_name('Mashonaland West')" class="loc">Mashonaland West</span> and Midlands, raising fears that the onset of the rains could lead to a repeat of the cholera epidemic that claimed thousands of lives in the past year. The five deaths resulted from 117 cases reported in the <span onClick="goto_name('Mashonaland West')" class="loc">Mashonaland West</span>, Manicaland and Midlands provinces since last month. The <span onClick="goto_name('provinces of Masvingo')" class="loc">provinces of Masvingo</span> province has also reported cases. The Zimbabwean Health and Child Welfare Secretary, Gerald Gwinji, said on Tuesday that most of the deaths and cases occurred among religious sects that do not accept medical treatment. "Most of the cases were recorded [...] among religious objectors, who for a long time have been reluctant to seek medical attention," he said. Health experts have warned that with the rainy season just beginning around the country, cholera could get out of hand if safe water is not made widely available. Aid agencies have been warning that another outbreak of the disease was very likely, as the heavy summer rains cause cholera, which is water-borne, to be transmitted more easily. “The fundamentals of the last epidemic are still there. Water is only sporadically available, and sewerage reticulation and refuse collection are only partially working,” a spokeswoman for the UNICEF said. Officials from aid agencies predicted that the number of current cholera infections in <span onClick="goto_name('Zimbabwe')" class="loc">Zimbabwe</span> will decline to around 60,000. “It’s not the catastrophe that it was last year but it’s still a big epidemic of an easily preventable disease that should never have been allowed to happen,” an unnamed agency doctor said. The decrease has been anticipated after large amounts of water purification tablets, communal water tanks, and boreholes were installed in water systems as part of an operation to make water safer to drink. Spokeswoman Tsitsi Singizi of the United Nations Children's Fund told the <span onClick="goto_name('Voice of America')" class="loc">Voice of America</span> news agency that the government and international or non-governmental aid agencies have been doing all they can to prevent a repeat of last year's deadly epidemic. A recent cholera epidemic in <span onClick="goto_name('Zimbabwe')" class="loc">Zimbabwe</span> claimed 4,288 lives from late 2008 to mid-2009, the worst outbreak seen on the African continent for fifteen years after the collapse of sanitation and water systems throughout the country.</p>
</div>
   <div id="list">
    <div id="instr">
     <p>
            Click on a lat/long to centre the map there.
	  </p>
    </div>
    <div id="table">
     <table>
      <tr>
       <th>Mashonaland West</th>
       <td best="true">
        <a onClick="goto(-17.16667,29.75)">
         <span style="white-space:nowrap">-17.167,29.750</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>provinces of Masvingo</th>
       <td best="true">
        <a onClick="goto(-20.06373,30.82766)">
         <span style="white-space:nowrap">-20.064,30.828</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.6,31.4)">
         <span style="white-space:nowrap">-20.600,31.400</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-19.40928,31.87364)">
         <span style="white-space:nowrap">-19.409,31.874</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.01667,29.95)">
         <span style="white-space:nowrap">-20.017,29.950</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-19.68088,31.45194)">
         <span style="white-space:nowrap">-19.681,31.452</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.51101,31.82852)">
         <span style="white-space:nowrap">-20.511,31.829</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.31481,30.90008)">
         <span style="white-space:nowrap">-20.315,30.900</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.65341,31.22928)">
         <span style="white-space:nowrap">-20.653,31.229</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Zimbabwe</th>
       <td best="true">
        <a onClick="goto(-19,29.75)">
         <span style="white-space:nowrap">-19.000,29.750</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.26667,30.91667)">
         <span style="white-space:nowrap">-20.267,30.917</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.3,30.93333)">
         <span style="white-space:nowrap">-20.300,30.933</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-20.12912,30.73189)">
         <span style="white-space:nowrap">-20.129,30.732</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Voice of America</th>
       <td best="true">
        <a onClick="goto(15.37901,120.6258)">
         <span style="white-space:nowrap">15.379,120.626</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(35.46739,-77.19968)">
         <span style="white-space:nowrap">35.467,-77.200</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(35.6246,-77.49136)">
         <span style="white-space:nowrap">35.625,-77.491</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(35.69711,-77.14746)">
         <span style="white-space:nowrap">35.697,-77.147</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(7.505,79.7995)">
         <span style="white-space:nowrap">7.505,79.799</span>
        </a>
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </body>
</html>
