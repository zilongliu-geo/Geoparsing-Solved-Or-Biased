<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link crossorigin="" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet"></link>
  <script crossorigin="" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();
    var markers_by_name = {};
    
    var green_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    var red_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    function load() {

        map = L.map('map');
    
    
	map.setView([39.48997,-86.10164], 8);
      

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
	
	  attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',
	
	    tileSize: 512,
	    maxZoom: 18,
	    zoomOffset: -1,
	    id: 'mapbox/streets-v11',
	    accessToken: 'unset'
	}).addTo(map);
	    
	
    var marker = L.marker([39.48997,-86.10164],
			  {
			      title: "Johnson",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([37.45963,-88.88089],
			  {
			      title: "Johnson",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([38.88376,-94.82226],
			  {
			      title: "Johnson",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([37.84664,-82.83154],
			  {
			      title: "Johnson",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([38.74409,-93.80637],
			  {
			      title: "Johnson",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([36.45494,-81.85175],
			  {
			      title: "Johnson",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([41.67155,-91.58808],
			  {
			      title: "Johnson",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([40.39263,-96.2651],
			  {
			      title: "Johnson",
			      icon: 8 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 8 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(8 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([35.57005,-93.45991],
			  {
			      title: "Johnson",
			      icon: 9 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 9 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(9 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([32.70146,-82.66008],
			  {
			      title: "Johnson",
			      icon: 10 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 10 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(10 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([32.37901,-97.36633],
			  {
			      title: "Johnson",
			      icon: 11 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 11 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(11 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([44.03877,-106.58463],
			  {
			      title: "Johnson",
			      icon: 12 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 12 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(12 == 1)
    markers_by_name["Johnson County"] = marker;
  
    var marker = L.marker([39.19932,-95.0379],
			  {
			      title: "Leavenworth",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Leavenworth County"] = marker;
  
    var marker = L.marker([38.50029,-98.50063],
			  {
			      title: "Kansas",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([39.33144,-86.03249],
			  {
			      title: "Kansas",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([39.55281,-87.93948],
			  {
			      title: "Kansas",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([36.90172,-88.72839],
			  {
			      title: "Kansas",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([41.24505,-83.28465],
			  {
			      title: "Kansas",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([36.45282,-86.38055],
			  {
			      title: "Kansas",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([40.48785,-77.81083],
			  {
			      title: "Little Kansas",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([36.20509,-94.79773],
			  {
			      title: "Kansas",
			      icon: 8 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 8 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(8 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([39.71567,-75.91661],
			  {
			      title: "Blake",
			      icon: 9 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 9 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(9 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([33.85816,-92.98822],
			  {
			      title: "Kansas",
			      icon: 10 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 10 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(10 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([33.90177,-87.55196],
			  {
			      title: "Kansas",
			      icon: 11 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 11 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(11 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([43.05786,-73.13094],
			  {
			      title: "Kansas",
			      icon: 12 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 12 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(12 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([36.08954,-83.36322],
			  {
			      title: "Kansas",
			      icon: 13 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 13 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(13 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([37.7014,-97.28004],
			  {
			      title: "Kansas",
			      icon: 14 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 14 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(14 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([33.62122,-85.27023],
			  {
			      title: "Kansas",
			      icon: 15 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 15 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(15 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([-23.11667,18.51667],
			  {
			      title: "Kansas",
			      icon: 16 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 16 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(16 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([49.43834,6.789],
			  {
			      title: "Kansas",
			      icon: 17 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 17 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(17 == 1)
    markers_by_name["Kansas"] = marker;
  
    var marker = L.marker([40.2565,-74.79822],
			  {
			      title: "Department of Transportation",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Department of Transportation"] = marker;
  
    var marker = L.marker([-25.7424,28.18621],
			  {
			      title: "Department of Transportation",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Department of Transportation"] = marker;
  

	adjust_locations(markers);
    }

    function goto(x, y) {
	map.flyTo([x,y]);
    }

    function goto_name(name) {
        if(markers_by_name.hasOwnProperty(name))
    	    map.flyTo(markers_by_name[name].getLatLng());
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getLatLng();
        if(l.lat == lastlat && l.lng == lastlng)
        {
//            alert("match: " + l.lat + "," + l.lng + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat;
        lastlng = l.lng;
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getLatLng();
    var lat = latlng.lat, lng = latlng.lng;
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var newlatlng = new L.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setLatLng(newlatlng);
//        alert(lat + " -> " + newlatlng.lat + "   " + lng + " -> " + newlatlng.lng);
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getLatLng(), l2 = m2.getLatLng();
    if(l1.lat == l2.lat)
        return l1.lng - l2.lng;
    else
        return l1.lat - l2.lat;
}
//]]>
      </script>
  <style>
	#map   {width: 100%; height: 500px}
        #text  {width: 50%; float: left; background-color: #BBCCAA; margin: 20px;}
        #list  {margin-left: 50%; overflow: scroll;}
        .loc   {background-color: #E0FFE8;}
	table  {border-collapse: collapse; empty-cells: show;}
	tr     {border: 1px solid black;}
	th,td  {padding:  3px;}
	td[best="true"]  {color: green;}
	td[best="false"] {color: red;}
      </style>
 </head>
 <body onload="load()">
  <div onload="load()" id="map"></div>
  <div id="lower">
   <div id="text">
<p>Seat belt use declines in <span onClick="goto_name('Johnson County')" class="loc">Johnson County</span> . Just three years ago, 85 percent of <span onClick="goto_name('Johnson County')" class="loc">Johnson County</span> residents buckled up in what was then an all-time high for the state, state officials said Friday. Mysteriously, the <span onClick="goto_name('Johnson County')" class="loc">Johnson County</span> rate last year was only 80 percent. Meanwhile, <span onClick="goto_name('Leavenworth County')" class="loc">Leavenworth County</span> has surged forward and last year led the state with an 86 percent rate. Douglas and Wyandotte counties also have improved in recent years, and last year more than 80 percent of people in those counties used seat belts, said Greg Scott with the <span onClick="goto_name('Kansas')" class="loc">Kansas</span> <span onClick="goto_name('Department of Transportation')" class="loc">Department of Transportation</span>.</p>
</div>
   <div id="list">
    <div id="instr">
     <p>
            Click on a lat/long to centre the map there.
	  </p>
    </div>
    <div id="table">
     <table>
      <tr>
       <th>Johnson County</th>
       <td best="true">
        <a onClick="goto(39.48997,-86.10164)">
         <span style="white-space:nowrap">39.490,-86.102</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.45963,-88.88089)">
         <span style="white-space:nowrap">37.460,-88.881</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.88376,-94.82226)">
         <span style="white-space:nowrap">38.884,-94.822</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.84664,-82.83154)">
         <span style="white-space:nowrap">37.847,-82.832</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.74409,-93.80637)">
         <span style="white-space:nowrap">38.744,-93.806</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(36.45494,-81.85175)">
         <span style="white-space:nowrap">36.455,-81.852</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(41.67155,-91.58808)">
         <span style="white-space:nowrap">41.672,-91.588</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.39263,-96.2651)">
         <span style="white-space:nowrap">40.393,-96.265</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(35.57005,-93.45991)">
         <span style="white-space:nowrap">35.570,-93.460</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(32.70146,-82.66008)">
         <span style="white-space:nowrap">32.701,-82.660</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(32.37901,-97.36633)">
         <span style="white-space:nowrap">32.379,-97.366</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(44.03877,-106.58463)">
         <span style="white-space:nowrap">44.039,-106.585</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Leavenworth County</th>
       <td best="true">
        <a onClick="goto(39.19932,-95.0379)">
         <span style="white-space:nowrap">39.199,-95.038</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Kansas</th>
       <td best="true">
        <a onClick="goto(38.50029,-98.50063)">
         <span style="white-space:nowrap">38.500,-98.501</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(39.33144,-86.03249)">
         <span style="white-space:nowrap">39.331,-86.032</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(39.55281,-87.93948)">
         <span style="white-space:nowrap">39.553,-87.939</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(36.90172,-88.72839)">
         <span style="white-space:nowrap">36.902,-88.728</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(41.24505,-83.28465)">
         <span style="white-space:nowrap">41.245,-83.285</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(36.45282,-86.38055)">
         <span style="white-space:nowrap">36.453,-86.381</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.48785,-77.81083)">
         <span style="white-space:nowrap">40.488,-77.811</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(36.20509,-94.79773)">
         <span style="white-space:nowrap">36.205,-94.798</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(39.71567,-75.91661)">
         <span style="white-space:nowrap">39.716,-75.917</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(33.85816,-92.98822)">
         <span style="white-space:nowrap">33.858,-92.988</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(33.90177,-87.55196)">
         <span style="white-space:nowrap">33.902,-87.552</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(43.05786,-73.13094)">
         <span style="white-space:nowrap">43.058,-73.131</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(36.08954,-83.36322)">
         <span style="white-space:nowrap">36.090,-83.363</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.7014,-97.28004)">
         <span style="white-space:nowrap">37.701,-97.280</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(33.62122,-85.27023)">
         <span style="white-space:nowrap">33.621,-85.270</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-23.11667,18.51667)">
         <span style="white-space:nowrap">-23.117,18.517</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(49.43834,6.789)">
         <span style="white-space:nowrap">49.438,6.789</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Department of Transportation</th>
       <td best="true">
        <a onClick="goto(40.2565,-74.79822)">
         <span style="white-space:nowrap">40.257,-74.798</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-25.7424,28.18621)">
         <span style="white-space:nowrap">-25.742,28.186</span>
        </a>
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </body>
</html>
