<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link crossorigin="" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet"></link>
  <script crossorigin="" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();
    var markers_by_name = {};
    
    var green_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    var red_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    function load() {

        map = L.map('map');
    
    
	map.setView([-29,24], 8);
      

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
	
	  attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',
	
	    tileSize: 512,
	    maxZoom: 18,
	    zoomOffset: -1,
	    id: 'mapbox/streets-v11',
	    accessToken: 'unset'
	}).addTo(map);
	    
	
    var marker = L.marker([-29,24],
			  {
			      title: "South Africa",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["South Africa"] = marker;
  
    var marker = L.marker([-31.3096,18.357],
			  {
			      title: "South Africa",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["South Africa"] = marker;
  
    var marker = L.marker([24.48721,54.37045],
			  {
			      title: "Janūb Afrīqiyā",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["South Africa"] = marker;
  
    var marker = L.marker([-26.20227,28.04363],
			  {
			      title: "Johannesburg",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([45.16524,-92.59409],
			  {
			      title: "Johannesburg",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([35.37274,-117.63478],
			  {
			      title: "Johannesburg",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([5.90666,-55.07098],
			  {
			      title: "Johannesburg",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([44.98557,-84.45585],
			  {
			      title: "Johannesburg",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([6.7649,80.2138],
			  {
			      title: "Jonannesburi",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([-25.09287,30.04181],
			  {
			      title: "Johannesburg",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([5.93333,-55.06667],
			  {
			      title: "Johannesburg",
			      icon: 8 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 8 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(8 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([-30.41799,25.73092],
			  {
			      title: "Johannesburg",
			      icon: 9 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 9 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(9 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([-22.94675,28.95645],
			  {
			      title: "Johannesburg",
			      icon: 10 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 10 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(10 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([-17.88333,30.63333],
			  {
			      title: "Johannesburg",
			      icon: 11 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 11 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(11 == 1)
    markers_by_name["Johannesburg"] = marker;
  
    var marker = L.marker([-18.25,35],
			  {
			      title: "Mozambique",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Mozambique"] = marker;
  
    var marker = L.marker([19.05956,-96.25451],
			  {
			      title: "Mozambique",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Mozambique"] = marker;
  
    var marker = L.marker([10.51667,-75.45],
			  {
			      title: "Mozambique",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Mozambique"] = marker;
  
    var marker = L.marker([-15.03466,40.73447],
			  {
			      title: "Mozambique",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Mozambique"] = marker;
  
    var marker = L.marker([3.96515,-73.0507],
			  {
			      title: "Mozambique",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Mozambique"] = marker;
  
    var marker = L.marker([22.9,-82.36667],
			  {
			      title: "Mozambique",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["Mozambique"] = marker;
  
    var marker = L.marker([-23.94565,28.77909],
			  {
			      title: "Mozambique",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["Mozambique"] = marker;
  
    var marker = L.marker([-22,24],
			  {
			      title: "Botswana",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Botswana"] = marker;
  
    var marker = L.marker([-24.33333,30.53333],
			  {
			      title: "Botswana",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Botswana"] = marker;
  
    var marker = L.marker([-24.28333,30.55],
			  {
			      title: "Botswana",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Botswana"] = marker;
  
    var marker = L.marker([39.76,-98.5],
			  {
			      title: "United States",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["United States"] = marker;
  

	adjust_locations(markers);
    }

    function goto(x, y) {
	map.flyTo([x,y]);
    }

    function goto_name(name) {
        if(markers_by_name.hasOwnProperty(name))
    	    map.flyTo(markers_by_name[name].getLatLng());
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getLatLng();
        if(l.lat == lastlat && l.lng == lastlng)
        {
//            alert("match: " + l.lat + "," + l.lng + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat;
        lastlng = l.lng;
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getLatLng();
    var lat = latlng.lat, lng = latlng.lng;
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var newlatlng = new L.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setLatLng(newlatlng);
//        alert(lat + " -> " + newlatlng.lat + "   " + lng + " -> " + newlatlng.lng);
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getLatLng(), l2 = m2.getLatLng();
    if(l1.lat == l2.lat)
        return l1.lng - l2.lng;
    else
        return l1.lat - l2.lat;
}
//]]>
      </script>
  <style>
	#map   {width: 100%; height: 500px}
        #text  {width: 50%; float: left; background-color: #BBCCAA; margin: 20px;}
        #list  {margin-left: 50%; overflow: scroll;}
        .loc   {background-color: #E0FFE8;}
	table  {border-collapse: collapse; empty-cells: show;}
	tr     {border: 1px solid black;}
	th,td  {padding:  3px;}
	td[best="true"]  {color: green;}
	td[best="false"] {color: red;}
      </style>
 </head>
 <body onload="load()">
  <div onload="load()" id="map"></div>
  <div id="lower">
   <div id="text">
<p>New research findings from <span onClick="goto_name('South Africa')" class="loc">South Africa</span> on an extremely drug-resistant (XDR) strain of the bacterium that causes tuberculosis (TB) alarm experts. XDR-TB is defined as resistance to three or more second line antibiotics for TB. The condition remains treatable with other types of medications, but those are less effective, costlier and toxic. Dr. Tony Moll discovered the Extremely Drug Resistant Tuberculosis (XDR-TB) in the South African region KwaZulu-Natal. In an interview, he said the new variant was "very highly troubling and alarming because of the very high fatality rate." Some patients might have contracted the bug in the hospital, Dr. Moll thinks, and at least two were hospital health workers. These distressing findings urged a two-day meeting in <span onClick="goto_name('Johannesburg')" class="loc">Johannesburg</span> to discuss the situation. Experts like Dr. Moll believe the new strain is also present in other provinces than KwaZulu-Natal. Conference organizers report cases in <span onClick="goto_name('Mozambique')" class="loc">Mozambique</span> and <span onClick="goto_name('Botswana')" class="loc">Botswana</span> too. The World Health Organization has called for renewed efforts to combat the disease. Meanwhile, officials of the Health Ministry are suspected to be enforcing a media ban on the topics of AIDS and possibly TB. During the 1990s, multidrug-resistant tuberculosis (MDR-TB), defined as resistance to at least isoniazid and rifampin, emerged as a threat to TB control, both in the <span onClick="goto_name('United States')" class="loc">United States</span> and worldwide.</p>
</div>
   <div id="list">
    <div id="instr">
     <p>
            Click on a lat/long to centre the map there.
	  </p>
    </div>
    <div id="table">
     <table>
      <tr>
       <th>South Africa</th>
       <td best="true">
        <a onClick="goto(-29,24)">
         <span style="white-space:nowrap">-29.000,24.000</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-31.3096,18.357)">
         <span style="white-space:nowrap">-31.310,18.357</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(24.48721,54.37045)">
         <span style="white-space:nowrap">24.487,54.370</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Johannesburg</th>
       <td best="true">
        <a onClick="goto(-26.20227,28.04363)">
         <span style="white-space:nowrap">-26.202,28.044</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(45.16524,-92.59409)">
         <span style="white-space:nowrap">45.165,-92.594</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(35.37274,-117.63478)">
         <span style="white-space:nowrap">35.373,-117.635</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(5.90666,-55.07098)">
         <span style="white-space:nowrap">5.907,-55.071</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(44.98557,-84.45585)">
         <span style="white-space:nowrap">44.986,-84.456</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(6.7649,80.2138)">
         <span style="white-space:nowrap">6.765,80.214</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-25.09287,30.04181)">
         <span style="white-space:nowrap">-25.093,30.042</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(5.93333,-55.06667)">
         <span style="white-space:nowrap">5.933,-55.067</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-30.41799,25.73092)">
         <span style="white-space:nowrap">-30.418,25.731</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-22.94675,28.95645)">
         <span style="white-space:nowrap">-22.947,28.956</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-17.88333,30.63333)">
         <span style="white-space:nowrap">-17.883,30.633</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Mozambique</th>
       <td best="true">
        <a onClick="goto(-18.25,35)">
         <span style="white-space:nowrap">-18.250,35.000</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(19.05956,-96.25451)">
         <span style="white-space:nowrap">19.060,-96.255</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(10.51667,-75.45)">
         <span style="white-space:nowrap">10.517,-75.450</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-15.03466,40.73447)">
         <span style="white-space:nowrap">-15.035,40.734</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(3.96515,-73.0507)">
         <span style="white-space:nowrap">3.965,-73.051</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(22.9,-82.36667)">
         <span style="white-space:nowrap">22.900,-82.367</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-23.94565,28.77909)">
         <span style="white-space:nowrap">-23.946,28.779</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Botswana</th>
       <td best="true">
        <a onClick="goto(-22,24)">
         <span style="white-space:nowrap">-22.000,24.000</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-24.33333,30.53333)">
         <span style="white-space:nowrap">-24.333,30.533</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(-24.28333,30.55)">
         <span style="white-space:nowrap">-24.283,30.550</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>United States</th>
       <td best="true">
        <a onClick="goto(39.76,-98.5)">
         <span style="white-space:nowrap">39.760,-98.500</span>
        </a>
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </body>
</html>
