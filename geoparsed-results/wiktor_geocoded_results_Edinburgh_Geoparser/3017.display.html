<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link crossorigin="" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet"></link>
  <script crossorigin="" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();
    var markers_by_name = {};
    
    var green_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    var red_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    function load() {

        map = L.map('map');
    
    
	map.setView([48.04602,-121.72218], 8);
      

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
	
	  attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',
	
	    tileSize: 512,
	    maxZoom: 18,
	    zoomOffset: -1,
	    id: 'mapbox/streets-v11',
	    accessToken: 'unset'
	}).addTo(map);
	    
	
    var marker = L.marker([48.04602,-121.72218],
			  {
			      title: "Snohomish",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Snohomish County"] = marker;
  
    var marker = L.marker([38.89511,-77.03637],
			  {
			      title: "Washington",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([38.96678,-77.04137],
			  {
			      title: "Washington",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([54.9,-1.51667],
			  {
			      title: "Washington",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([39.35934,-120.79911],
			  {
			      title: "Washington",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([38.55811,-91.01209],
			  {
			      title: "Washington",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([31.57878,-91.29928],
			  {
			      title: "Washington",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([44.10562,-72.4326],
			  {
			      title: "Washington",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([41.68843,-71.56673],
			  {
			      title: "Washington",
			      icon: 8 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 8 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(8 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([42.36592,-73.11621],
			  {
			      title: "Washington",
			      icon: 9 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 9 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(9 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([43.17591,-72.09675],
			  {
			      title: "Washington",
			      icon: 10 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 10 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(10 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([41.3975,-96.20808],
			  {
			      title: "Washington",
			      icon: 11 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 11 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(11 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([40.70365,-89.40731],
			  {
			      title: "Washington",
			      icon: 12 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 12 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(12 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([39.26119,-81.6718],
			  {
			      title: "Washington",
			      icon: 13 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 13 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(13 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([44.27369,-69.36727],
			  {
			      title: "Washington",
			      icon: 14 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 14 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(14 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([35.05896,-97.48448],
			  {
			      title: "Washington",
			      icon: 15 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 15 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(15 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([38.65922,-87.17279],
			  {
			      title: "Washington",
			      icon: 16 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 16 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(16 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([40.17396,-80.24617],
			  {
			      title: "Washington",
			      icon: 17 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 17 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(17 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([37.13054,-113.50829],
			  {
			      title: "Washington",
			      icon: 18 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 18 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(18 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([10.8562,123.5207],
			  {
			      title: "Washington",
			      icon: 19 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 19 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(19 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([20.7925,-76.67444],
			  {
			      title: "Washington",
			      icon: 20 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 20 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(20 == 1)
    markers_by_name["Washington"] = marker;
  
    var marker = L.marker([39.76,-98.5],
			  {
			      title: "United States",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["United States"] = marker;
  
    var marker = L.marker([47.86066,-121.8204],
			  {
			      title: "Sultan River",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Sultan River"] = marker;
  
    var marker = L.marker([47.70927,-121.3601],
			  {
			      title: "Skykomish",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Skykomish"] = marker;
  
    var marker = L.marker([47.83038,-122.04679],
			  {
			      title: "Skykomish River",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Skykomish River"] = marker;
  
    var marker = L.marker([-19.78333,29.73333],
			  {
			      title: "Muddy Waters",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Muddy Waters"] = marker;
  

	adjust_locations(markers);
    }

    function goto(x, y) {
	map.flyTo([x,y]);
    }

    function goto_name(name) {
        if(markers_by_name.hasOwnProperty(name))
    	    map.flyTo(markers_by_name[name].getLatLng());
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getLatLng();
        if(l.lat == lastlat && l.lng == lastlng)
        {
//            alert("match: " + l.lat + "," + l.lng + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat;
        lastlng = l.lng;
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getLatLng();
    var lat = latlng.lat, lng = latlng.lng;
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var newlatlng = new L.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setLatLng(newlatlng);
//        alert(lat + " -> " + newlatlng.lat + "   " + lng + " -> " + newlatlng.lng);
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getLatLng(), l2 = m2.getLatLng();
    if(l1.lat == l2.lat)
        return l1.lng - l2.lng;
    else
        return l1.lat - l2.lat;
}
//]]>
      </script>
  <style>
	#map   {width: 100%; height: 500px}
        #text  {width: 50%; float: left; background-color: #BBCCAA; margin: 20px;}
        #list  {margin-left: 50%; overflow: scroll;}
        .loc   {background-color: #E0FFE8;}
	table  {border-collapse: collapse; empty-cells: show;}
	tr     {border: 1px solid black;}
	th,td  {padding:  3px;}
	td[best="true"]  {color: green;}
	td[best="false"] {color: red;}
      </style>
 </head>
 <body onload="load()">
  <div onload="load()" id="map"></div>
  <div id="lower">
   <div id="text">
<p>Sultan is a city in <span onClick="goto_name('Snohomish County')" class="loc">Snohomish County</span>, <span onClick="goto_name('Washington')" class="loc">Washington</span>, <span onClick="goto_name('United States')" class="loc">United States</span>, located where the <span onClick="goto_name('Sultan River')" class="loc">Sultan River</span> flows into the <span onClick="goto_name('Skykomish')" class="loc">Skykomish</span>. The population was 4,651 at the 2010 census. There is an annual 3-day street fair held in July, known as the 'Sultan Shindig'. Carnival rides, street vendors and logging games are a popular part of the fair. As well as this, the Shindig's loggers practice in Spring with logs that they are allowed to cut into a variety of wooden sculptures. Sultan was originally settled around 1880, but not officially incorporated until June 28, 1905. Both the <span onClick="goto_name('Sultan River')" class="loc">Sultan River</span> and the town of Sultan were named by prospectors for the chief of a Snohomish sub-tribe who lived on the <span onClick="goto_name('Skykomish River')" class="loc">Skykomish River</span> in the 1870s. His name as Tsul-tad or Tseul-tud, which was anglicized by the miners into Sultan. For generations Sultan remained a small logging community. In 1968, the town was visited by more than 20,000 hippies during The Sky River Rock Festival and Lighter Than Air Fair, one of the first outdoor rock festivals. The event took place on a farm near town. The line-up included Santana, Grateful Dead, Country Joe McDonald, <span onClick="goto_name('Muddy Waters')" class="loc">Muddy Waters</span>, Buffy St. Marie, guitarist John Fahey, and many others. Also on hand was the young comedian Richard Pryor.</p>
</div>
   <div id="list">
    <div id="instr">
     <p>
            Click on a lat/long to centre the map there.
	  </p>
    </div>
    <div id="table">
     <table>
      <tr>
       <th>Snohomish County</th>
       <td best="true">
        <a onClick="goto(48.04602,-121.72218)">
         <span style="white-space:nowrap">48.046,-121.722</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Washington</th>
       <td best="true">
        <a onClick="goto(38.89511,-77.03637)">
         <span style="white-space:nowrap">38.895,-77.036</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.96678,-77.04137)">
         <span style="white-space:nowrap">38.967,-77.041</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(54.9,-1.51667)">
         <span style="white-space:nowrap">54.900,-1.517</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(39.35934,-120.79911)">
         <span style="white-space:nowrap">39.359,-120.799</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.55811,-91.01209)">
         <span style="white-space:nowrap">38.558,-91.012</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(31.57878,-91.29928)">
         <span style="white-space:nowrap">31.579,-91.299</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(44.10562,-72.4326)">
         <span style="white-space:nowrap">44.106,-72.433</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(41.68843,-71.56673)">
         <span style="white-space:nowrap">41.688,-71.567</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(42.36592,-73.11621)">
         <span style="white-space:nowrap">42.366,-73.116</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(43.17591,-72.09675)">
         <span style="white-space:nowrap">43.176,-72.097</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(41.3975,-96.20808)">
         <span style="white-space:nowrap">41.398,-96.208</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.70365,-89.40731)">
         <span style="white-space:nowrap">40.704,-89.407</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(39.26119,-81.6718)">
         <span style="white-space:nowrap">39.261,-81.672</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(44.27369,-69.36727)">
         <span style="white-space:nowrap">44.274,-69.367</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(35.05896,-97.48448)">
         <span style="white-space:nowrap">35.059,-97.484</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.65922,-87.17279)">
         <span style="white-space:nowrap">38.659,-87.173</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.17396,-80.24617)">
         <span style="white-space:nowrap">40.174,-80.246</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.13054,-113.50829)">
         <span style="white-space:nowrap">37.131,-113.508</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(10.8562,123.5207)">
         <span style="white-space:nowrap">10.856,123.521</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(20.7925,-76.67444)">
         <span style="white-space:nowrap">20.793,-76.674</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>United States</th>
       <td best="true">
        <a onClick="goto(39.76,-98.5)">
         <span style="white-space:nowrap">39.760,-98.500</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Sultan River</th>
       <td best="true">
        <a onClick="goto(47.86066,-121.8204)">
         <span style="white-space:nowrap">47.861,-121.820</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Skykomish</th>
       <td best="true">
        <a onClick="goto(47.70927,-121.3601)">
         <span style="white-space:nowrap">47.709,-121.360</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Skykomish River</th>
       <td best="true">
        <a onClick="goto(47.83038,-122.04679)">
         <span style="white-space:nowrap">47.830,-122.047</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Muddy Waters</th>
       <td best="true">
        <a onClick="goto(-19.78333,29.73333)">
         <span style="white-space:nowrap">-19.783,29.733</span>
        </a>
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </body>
</html>
