<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link crossorigin="" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet"></link>
  <script crossorigin="" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();
    var markers_by_name = {};
    
    var green_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    var red_icon = new L.Icon({
	iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
	shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
    });

    function load() {

        map = L.map('map');
    
    
	map.setView([33.90233,-81.27219], 8);
      

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
	
	  attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',
	
	    tileSize: 512,
	    maxZoom: 18,
	    zoomOffset: -1,
	    id: 'mapbox/streets-v11',
	    accessToken: 'unset'
	}).addTo(map);
	    
	
    var marker = L.marker([33.90233,-81.27219],
			  {
			      title: "Lexington",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Lexington County"] = marker;
  
    var marker = L.marker([33.98154,-81.23621],
			  {
			      title: "Lexington",
			      icon: 1 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 1 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(1 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([37.98869,-84.47772],
			  {
			      title: "Lexington",
			      icon: 2 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 2 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(2 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([38.0498,-84.45855],
			  {
			      title: "Lexington-Fayette",
			      icon: 3 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 3 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(3 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([35.82403,-80.25338],
			  {
			      title: "Lexington",
			      icon: 4 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 4 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(4 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([42.44732,-71.2245],
			  {
			      title: "Lexington",
			      icon: 5 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 5 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(5 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([37.78402,-79.44282],
			  {
			      title: "Lexington",
			      icon: 6 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 6 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(6 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([38.19735,-78.48223],
			  {
			      title: "Lexington",
			      icon: 7 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 7 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(7 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([38.65228,-85.62524],
			  {
			      title: "Lexington",
			      icon: 8 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 8 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(8 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([40.67867,-82.58239],
			  {
			      title: "Lexington",
			      icon: 9 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 9 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(9 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([40.18843,-76.29968],
			  {
			      title: "Lexington",
			      icon: 10 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 10 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(10 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([40.45892,-86.48889],
			  {
			      title: "Lexington",
			      icon: 11 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 11 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(11 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([37.29391,-99.59957],
			  {
			      title: "Lexington",
			      icon: 12 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 12 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(12 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([30.4191,-97.01165],
			  {
			      title: "Lexington",
			      icon: 13 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 13 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(13 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([42.24036,-74.36543],
			  {
			      title: "Lexington",
			      icon: 14 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 14 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(14 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([45.14247,-93.16328],
			  {
			      title: "Lexington",
			      icon: 15 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 15 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(15 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([44.99867,-70.05367],
			  {
			      title: "Lexington",
			      icon: 16 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 16 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(16 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([40.64142,-88.7834],
			  {
			      title: "Lexington",
			      icon: 17 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 17 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(17 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([40.78084,-99.7415],
			  {
			      title: "Lexington",
			      icon: 18 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 18 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(18 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([45.44513,-119.68447],
			  {
			      title: "Lexington",
			      icon: 19 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 19 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(19 == 1)
    markers_by_name["Lexington"] = marker;
  
    var marker = L.marker([37.77309,-79.45244],
			  {
			      title: "Lexington",
			      icon: 20 == 1 ? green_icon : red_icon,
    
			      zIndexOffset: 1000 - 20 * 20
			  });
    marker.addTo(map);
    markers.push(marker);
    if(20 == 1)
    markers_by_name["Lexington"] = marker;
  

	adjust_locations(markers);
    }

    function goto(x, y) {
	map.flyTo([x,y]);
    }

    function goto_name(name) {
        if(markers_by_name.hasOwnProperty(name))
    	    map.flyTo(markers_by_name[name].getLatLng());
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getLatLng();
        if(l.lat == lastlat && l.lng == lastlng)
        {
//            alert("match: " + l.lat + "," + l.lng + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat;
        lastlng = l.lng;
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getLatLng();
    var lat = latlng.lat, lng = latlng.lng;
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var newlatlng = new L.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setLatLng(newlatlng);
//        alert(lat + " -> " + newlatlng.lat + "   " + lng + " -> " + newlatlng.lng);
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getLatLng(), l2 = m2.getLatLng();
    if(l1.lat == l2.lat)
        return l1.lng - l2.lng;
    else
        return l1.lat - l2.lat;
}
//]]>
      </script>
  <style>
	#map   {width: 100%; height: 500px}
        #text  {width: 50%; float: left; background-color: #BBCCAA; margin: 20px;}
        #list  {margin-left: 50%; overflow: scroll;}
        .loc   {background-color: #E0FFE8;}
	table  {border-collapse: collapse; empty-cells: show;}
	tr     {border: 1px solid black;}
	th,td  {padding:  3px;}
	td[best="true"]  {color: green;}
	td[best="false"] {color: red;}
      </style>
 </head>
 <body onload="load()">
  <div onload="load()" id="map"></div>
  <div id="lower">
   <div id="text">
<p>
     <span onClick="goto_name('Lexington County')" class="loc">Lexington County</span> smoking ban push reignited. Supporters of a smoking ban for <span onClick="goto_name('Lexington County')" class="loc">Lexington County</span> settled Tuesday on a deal that is less than desired but is designed to end a stalemate. The plan would snuff smoking in restaurants and bars, except on outdoor decks and patios and inside private clubs that were open as of Jan. 1 this year. Restrictions in stores, offices and other places would remain at the owner’s discretion. “It’s the best we can get right now,” council chairman Debbie Summers said. The plan quickly won approval from a County Council committee, setting the stage for ending a conflict that has persisted since fall. The nine-member council can take it up as soon as April 14. Some supporters say the proposal is the last attempt to break the standoff. “If this doesn’t make it, the deal is dead,” Councilman Bill Banning said. But he expects narrow approval next month. Allowing smoking decks and patios is “creating miniature leper colonies,” Councilman Todd Cullum said. All nearby communities with a ban allow that except for the town of <span onClick="goto_name('Lexington')" class="loc">Lexington</span>. Mayor Randy Halfacre said he will seek to permit smoking decks and patios in his community if the new county plan for unincorporated areas is put into place. But town leaders will stick with their ban on smoking inside any workplace, he said. The new plan for county restrictions is “a big step” even though it is less than some advocates want, Halfacre said. The plan received a mixed reaction from one spokesman for the bar and restaurant industry. Bars and restaurants can live with a uniform ban, Tom Sponseller said. “If it’s a level playing field, everyone gets treated the same, and there’s no harm,” he said. But he is concerned the exemption for private clubs could become either a loophole or a restriction so tight that it also bars smoking in country clubs and sites that nonprofit clubs operate for members.</p>
</div>
   <div id="list">
    <div id="instr">
     <p>
            Click on a lat/long to centre the map there.
	  </p>
    </div>
    <div id="table">
     <table>
      <tr>
       <th>Lexington County</th>
       <td best="true">
        <a onClick="goto(33.90233,-81.27219)">
         <span style="white-space:nowrap">33.902,-81.272</span>
        </a>
       </td>
      </tr>
      <tr>
       <th>Lexington</th>
       <td best="true">
        <a onClick="goto(33.98154,-81.23621)">
         <span style="white-space:nowrap">33.982,-81.236</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.98869,-84.47772)">
         <span style="white-space:nowrap">37.989,-84.478</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.0498,-84.45855)">
         <span style="white-space:nowrap">38.050,-84.459</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(35.82403,-80.25338)">
         <span style="white-space:nowrap">35.824,-80.253</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(42.44732,-71.2245)">
         <span style="white-space:nowrap">42.447,-71.225</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.78402,-79.44282)">
         <span style="white-space:nowrap">37.784,-79.443</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.19735,-78.48223)">
         <span style="white-space:nowrap">38.197,-78.482</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(38.65228,-85.62524)">
         <span style="white-space:nowrap">38.652,-85.625</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.67867,-82.58239)">
         <span style="white-space:nowrap">40.679,-82.582</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.18843,-76.29968)">
         <span style="white-space:nowrap">40.188,-76.300</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.45892,-86.48889)">
         <span style="white-space:nowrap">40.459,-86.489</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.29391,-99.59957)">
         <span style="white-space:nowrap">37.294,-99.600</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(30.4191,-97.01165)">
         <span style="white-space:nowrap">30.419,-97.012</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(42.24036,-74.36543)">
         <span style="white-space:nowrap">42.240,-74.365</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(45.14247,-93.16328)">
         <span style="white-space:nowrap">45.142,-93.163</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(44.99867,-70.05367)">
         <span style="white-space:nowrap">44.999,-70.054</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.64142,-88.7834)">
         <span style="white-space:nowrap">40.641,-88.783</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(40.78084,-99.7415)">
         <span style="white-space:nowrap">40.781,-99.742</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(45.44513,-119.68447)">
         <span style="white-space:nowrap">45.445,-119.684</span>
        </a>
       </td>
       <td best="false">
        <a onClick="goto(37.77309,-79.45244)">
         <span style="white-space:nowrap">37.773,-79.452</span>
        </a>
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </body>
</html>
